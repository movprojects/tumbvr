!function t(e,s,i){function o(n,a){if(!s[n]){if(!e[n]){var c="function"==typeof require&&require;if(!a&&c)return c(n,!0);if(r)return r(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var d=s[n]={exports:{}};e[n][0].call(d.exports,function(t){var s=e[n][1][t];return o(s?s:t)},d,d.exports,t,e,s,i)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}({1:[function(t,e,s){var i;!function(){"use strict";i=function(t,e,s,i,o,r){switch(r=r||function(){},this.assetList=t,e){case"obj":this.loadObj(s);break;case"dae":this.loadDae(s)}return this.addAssetMesh(e,s,i,o,r)},i.prototype.loadObj=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-obj"),e.setAttribute("src","/public/assets/"+t+".obj"),this.assetList.appendChild(e);var s=document.createElement("a-asset-item");s.setAttribute("id","asset_"+t+"-mtl"),s.setAttribute("src","/public/assets/"+t+".mtl"),this.assetList.appendChild(s)},i.prototype.loadDae=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-dae"),e.setAttribute("src","/public/assets/"+t+".dae"),this.assetList.appendChild(e)},i.prototype.addAssetMesh=function(t,e,s,i,o){s=s||new THREE.Vector3,i=i||new THREE.Vector3(1,1,1);var r=document.createElement("a-entity");switch(r.setAttribute("id","mesh_"+e),t){case"obj":r.setAttribute("obj-model","obj: #asset_"+e+"-obj; mtl: #asset_"+e+"-mtl");break;case"dae":r.setAttribute("collada-model","#asset_"+e+"-dae")}return r.setAttribute("position",s),r.setAttribute("scale",i),document.querySelector("a-scene").appendChild(r),r.addEventListener("loaded",o),r}}(),e.exports=i},{}],2:[function(t,e,s){var i;!function(){"use strict";i=function(t){this.ballsArray=[],this.nbFrameReset=60,this.minDist=.01,this.maxDist=4,this.tmpVec=new THREE.Vector3;for(var e=0,s=t.length;e<s;++e){var i=document.querySelector("#"+t[e]);this.ballsArray.push({entity:i,iniPos:(new THREE.Vector3).copy(i.getAttribute("position")),movPos:new THREE.Vector3,countStatic:0})}this.update()},i.prototype.update=function(){for(var t=0,e=this.ballsArray.length;t<e;++t){var s=this.ballsArray[t];this.tmpVec.copy(s.entity.getAttribute("position")),this.tmpVec.distanceTo(s.iniPos)>this.maxDist&&(this.tmpVec.distanceTo(s.movPos)<this.minDist&&(s.countStatic++,s.countStatic>this.nbFrameReset&&(s.entity.pause(),s.countStatic=0,s.entity.setAttribute("position",s.iniPos),s.entity.play())),s.movPos.copy(this.tmpVec))}requestAnimationFrame(this.update.bind(this))}}(),e.exports=i},{}],3:[function(t,e,s){var i;!function(){"use strict";i=function(t,e){this.assetList=t,this.ratios=[],this.nbFrames=Math.min(e.length,12),this.loadAssets(e),this.onAssetsLoaded()},i.prototype.loadAssets=function(t){for(var e=0;e<this.nbFrames;++e){var s=t[e].photos[0].original_size,i=document.createElement("img");i.setAttribute("id","img"+e),i.setAttribute("src","http://ec2-52-27-113-232.us-west-2.compute.amazonaws.com:8080/"+s.url),i.setAttribute("crossorigin","anonymous"),this.assetList.appendChild(i),this.ratios.push(s.height/s.width)}},i.prototype.onAssetsLoaded=function(){for(var t=document.querySelector("a-scene"),e=document.querySelector("#mesh_cavanagh").getObject3D("mesh"),s=e.children.filter(function(t){return t.name.indexOf("Plane")!==-1}),i=0;i<this.nbFrames;++i){var o=document.createElement("a-image");t.appendChild(o),o.setAttribute("src","#img"+i);var r=new THREE.Vector3,n=new THREE.Vector3;s[i].geometry.computeBoundingSphere(),r.copy(s[i].geometry.boundingSphere.center),s[i].name.indexOf("Rotated")!==-1&&(n.y=90),o.setAttribute("position",r),o.setAttribute("rotation",n);var a=Math.min(2,this.ratios[i]<1?1.5/this.ratios[i]:1.5),c=Math.min(2,this.ratios[i]<1?1.5:1.5*this.ratios[i]);o.setAttribute("width",a),o.setAttribute("height",c),s[i].visible=!1}}}(),e.exports=i},{}],4:[function(t,e,s){!function(){"use strict";function e(t,s,i){i=i||function(){},document.querySelector("#"+t).getObject3D("mesh")instanceof s?i():setTimeout(function(){e(t,s,i)},250)}function s(t){var s=void 0;s=new o(c,"obj","cavanagh",new THREE.Vector3,new THREE.Vector3(t.x/n,1,t.z/n),function(){e("mesh_cavanagh",THREE.Group,function(){new i(c,tumbDatas.posts)})})}var i=t("./imageLoader.js"),o=t("./assetLoader.js"),r=t("./ballsManager.js"),n=7.92;THREE.ImageUtils.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous";var a=document.querySelector("a-scene"),c=document.createElement("a-assets");a.appendChild(c);var u=new o(c,"dae","david",new THREE.Vector3(0,.1,2),new THREE.Vector3(.8,.8,.8));u.setAttribute("dynamic-body","shape: box; mass: 15"),u.setAttribute("rotation",new THREE.Vector3(0,90,0)),s({x:n,z:n});var d=["ball1","ball2","ball3"];new r(d);for(var l=0;l<6;++l){var m=document.createElement("a-box");m.setAttribute("static-body","true"),m.setAttribute("id","colBox_"+l),m.setAttribute("visible",!1),l<2?(m.setAttribute("width",8),m.setAttribute("height",.1),m.setAttribute("depth",8)):l<4?(m.setAttribute("width",.1),m.setAttribute("height",8),m.setAttribute("depth",8)):(m.setAttribute("width",8),m.setAttribute("height",8),m.setAttribute("depth",.1)),a.appendChild(m)}document.querySelector("#colBox_0").setAttribute("position",new THREE.Vector3(0,0,0)),document.querySelector("#colBox_1").setAttribute("position",new THREE.Vector3(0,2.8,0)),document.querySelector("#colBox_2").setAttribute("position",new THREE.Vector3((-4.1),1,0)),document.querySelector("#colBox_3").setAttribute("position",new THREE.Vector3(4.1,1,0)),document.querySelector("#colBox_4").setAttribute("position",new THREE.Vector3(0,1,4.1)),document.querySelector("#colBox_5").setAttribute("position",new THREE.Vector3(0,1,(-4.1)))}()},{"./assetLoader.js":1,"./ballsManager.js":2,"./imageLoader.js":3}]},{},[4]);
