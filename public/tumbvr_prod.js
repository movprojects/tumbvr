!function t(e,o,i){function r(n,a){if(!o[n]){if(!e[n]){var u="function"==typeof require&&require;if(!a&&u)return u(n,!0);if(s)return s(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var l=o[n]={exports:{}};e[n][0].call(l.exports,function(t){var o=e[n][1][t];return r(o?o:t)},l,l.exports,t,e,o,i)}return o[n].exports}for(var s="function"==typeof require&&require,n=0;n<i.length;n++)r(i[n]);return r}({1:[function(t,e,o){var i;!function(){"use strict";i=function(t,e,o,i,r,s){switch(s=s||function(){},this.assetList=t,e){case"obj":this.loadObj(o);break;case"dae":this.loadDae(o)}return this.addAssetMesh(e,o,i,r,s)},i.prototype.loadObj=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-obj"),e.setAttribute("src","/public/assets/"+t+".obj"),this.assetList.appendChild(e);var o=document.createElement("a-asset-item");o.setAttribute("id","asset_"+t+"-mtl"),o.setAttribute("src","/public/assets/"+t+".mtl"),this.assetList.appendChild(o)},i.prototype.loadDae=function(t){var e=document.createElement("a-asset-item");e.setAttribute("id","asset_"+t+"-dae"),e.setAttribute("src","/public/assets/"+t+".dae"),this.assetList.appendChild(e)},i.prototype.addAssetMesh=function(t,e,o,i,r){o=o||new THREE.Vector3,i=i||new THREE.Vector3(1,1,1);var s=document.createElement("a-entity");switch(s.setAttribute("id","mesh_"+e),t){case"obj":s.setAttribute("obj-model","obj: #asset_"+e+"-obj; mtl: #asset_"+e+"-mtl");break;case"dae":s.setAttribute("collada-model","#asset_"+e+"-dae")}return s.setAttribute("position",o),s.setAttribute("scale",i),document.querySelector("a-scene").appendChild(s),s.addEventListener("loaded",r),s}}(),e.exports=i},{}],2:[function(t,e,o){var i;!function(){"use strict";i=function(t){this.leftController=document.querySelector("#leftController"),this.rightController=document.querySelector("#rightController"),this.ground=document.querySelector("#colBox_0"),this.ballsArray=[],this.timeBack=4e3;for(var e=new THREE.Vector3,o=0,i=t.length;o<i;++o){var r=document.querySelector("#"+t[o]);e.copy(r.getAttribute("position")),e.y+=.5,this.ballsArray.push({entity:r,iniPos:(new THREE.Vector3).copy(e),timeoutBack:void 0}),r.addEventListener("collide",this.onCollide.bind(this))}},i.prototype.onCollide=function(t){var e=this;if(t.detail.body.el===document.querySelector("#colBox_0"))for(var o=0,i=this.ballsArray.length;o<i;++o)if(this.ballsArray[o].entity===t.detail.target.el){var r=this.ballsArray[o];console.log("Found the ball!",r),void 0===r.timeoutBack&&(r.timeoutBack=setTimeout(function(){e.putBallBack(r)},this.timeBack));break}},i.prototype.putBallBack=function(t){t.entity.pause(),t.entity.setAttribute("position",t.iniPos),t.entity.play(),clearTimeout(t.timeoutBack),t.timeoutBack=void 0}}(),e.exports=i},{}],3:[function(t,e,o){var i;!function(){"use strict";i=function(t,e){this.assetList=t,this.imgArray=[],this.nbFrames=Math.min(e.length,12),this.loadAssets(e),this.rotatingFrames=[],this.tempRot=new THREE.Vector3,this.onAssetsLoaded(),this.update()},i.prototype.loadAssets=function(t){for(var e=0;e<t.length;++e){var o=t[e].photos[0].original_size,i=document.createElement("img");i.setAttribute("id","img"+e),i.setAttribute("src","http://ec2-52-27-113-232.us-west-2.compute.amazonaws.com:8080/"+o.url),i.setAttribute("crossorigin","anonymous"),this.assetList.appendChild(i),this.imgArray.push({id:"img"+e,ratio:o.height/o.width})}},i.prototype.onAssetsLoaded=function(){for(var t=document.querySelector("a-scene"),e=document.querySelector("#mesh_cavanagh").getObject3D("mesh"),o=e.children.filter(function(t){return t.name.indexOf("Plane")!==-1}),i=0;i<this.nbFrames;++i){var r=document.createElement("a-image");r.setAttribute("static-body","true"),t.appendChild(r),r.addEventListener("collide",this.onCollide.bind(this));var s=new THREE.Vector3,n=new THREE.Vector3;o[i].geometry.computeBoundingSphere(),s.copy(o[i].geometry.boundingSphere.center),o[i].name.indexOf("Rotated")!==-1&&(n.y=90),r.setAttribute("position",s),r.setAttribute("rotation",n),this.addFrame(r,this.imgArray[i]),o[i].visible=!1}},i.prototype.addFrame=function(t,e){var o=Math.min(2,e.ratio<1?1.5/e.ratio:1.5),i=Math.min(2,e.ratio<1?1.5:1.5*e.ratio);t.setAttribute("width",o),t.setAttribute("height",i),t.setAttribute("src","#"+e.id)},i.prototype.onCollide=function(t){this.rotatingFrames.push({rot:new THREE.Vector3,iniRot:(new THREE.Vector3).copy(t.detail.target.el.getAttribute("rotation")),imgEntity:t.detail.target.el,newAsset:this.imgArray[Math.round(Math.random()*(this.imgArray.length-1))]})},i.prototype.update=function(){for(var t=this.rotatingFrames.length-1;t>=0;--t){var e=this.rotatingFrames[t];e.rot.y<180?(e.rot.y++,e.imgEntity.setAttribute("rotation",this.tempRot.addVectors(e.rot,e.iniRot))):(this.addFrame(e.imgEntity,e.newAsset),this.rotatingFrames.pop())}requestAnimationFrame(this.update.bind(this))}}(),e.exports=i},{}],4:[function(t,e,o){!function(){"use strict";function e(t,o,i){i=i||function(){},document.querySelector("#"+t).getObject3D("mesh")instanceof o?i():setTimeout(function(){e(t,o,i)},250)}function o(t){var o=void 0;o=new r(u,"obj","cavanagh",new THREE.Vector3,new THREE.Vector3(t.x/n,1,t.z/n),function(){e("mesh_cavanagh",THREE.Group,function(){new i(u,tumbDatas.posts)})})}var i=t("./imageLoader.js"),r=t("./assetLoader.js"),s=t("./ballsManager.js"),n=7.92;THREE.ImageUtils.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.crossOrigin="anonymous",THREE.ImageUtils.loadTexture.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.crossOrigin="anonymous",THREE.ImageUtils.loadTextureCube.prototype.crossOrigin="anonymous";var a=document.querySelector("a-scene"),u=document.createElement("a-assets");a.appendChild(u);var c=new r(u,"dae","david",new THREE.Vector3(0,.1,2),new THREE.Vector3(.8,.8,.8));c.setAttribute("dynamic-body","shape: box; mass: 15"),c.setAttribute("rotation",new THREE.Vector3(0,90,0));var l=document.createElement("audio");l.setAttribute("id","amazingGrace2011"),l.setAttribute("src","public/amazingGrace2011.WAV"),u.appendChild(l);var d=new r(u,"obj","speaker",new THREE.Vector3(0,0,(-1.05)),new THREE.Vector3(.4,.4,.4));d.setAttribute("sound","src: #amazingGrace2011;autoplay:true;loop:true"),o({x:n,z:n});var m=["ball1","ball2","ball3"];new s(m);for(var h=0;h<6;++h){var p=document.createElement("a-box");p.setAttribute("static-body","true"),p.setAttribute("id","colBox_"+h),p.setAttribute("visible",!1),h<2?(p.setAttribute("width",8),p.setAttribute("height",.1),p.setAttribute("depth",8)):h<4?(p.setAttribute("width",.1),p.setAttribute("height",8),p.setAttribute("depth",8)):(p.setAttribute("width",8),p.setAttribute("height",8),p.setAttribute("depth",.1)),a.appendChild(p)}document.querySelector("#colBox_0").setAttribute("position",new THREE.Vector3(0,0,0)),document.querySelector("#colBox_1").setAttribute("position",new THREE.Vector3(0,2.8,0)),document.querySelector("#colBox_2").setAttribute("position",new THREE.Vector3((-4.1),1,0)),document.querySelector("#colBox_3").setAttribute("position",new THREE.Vector3(4.1,1,0)),document.querySelector("#colBox_4").setAttribute("position",new THREE.Vector3(0,1,4.1)),document.querySelector("#colBox_5").setAttribute("position",new THREE.Vector3(0,1,(-4.1)))}()},{"./assetLoader.js":1,"./ballsManager.js":2,"./imageLoader.js":3}]},{},[4]);
